name: test-e2e
on:
  - push
  - workflow_dispatch
jobs:
  golangci:
    name: test-e2e
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5
      - uses: actions/setup-go@44694675825211faa026b3c33043df3e48a5fa00 # v6
        with:
          go-version: '1.25.1' # renovate: datasource=golang-version depName=go
      - name: install latest docker
        run: |
          wget --output-document=docker-ce.asc https://download.docker.com/linux/ubuntu/gpg
          sudo install -D -o root -g root -m 644 docker-ce.asc /etc/apt/keyrings/docker-ce.asc
          printf 'deb [arch=amd64 signed-by=/etc/apt/keyrings/docker-ce.asc] https://download.docker.com/linux/ubuntu %s stable\n' "$(lsb_release -sc)" | tee docker-ce.list
          sudo install -D -o root -g root -m 644 docker-ce.list /etc/apt/sources.list.d/docker-ce.list
          sudo apt-get update
          sudo apt-get install docker-ce
      - run: docker version
      - run: go version
      - run: go test ./test/e2e
